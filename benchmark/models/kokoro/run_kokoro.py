from kokoro import KPipeline
from IPython.display import display, Audio
import soundfile as sf
import torch
import os

texts = ["Quantum computers leverage the principles of superposition and entanglement to process information in ways classical computers cannot. Unlike traditional bits that exist as either 0 or 1, quantum bits or qubits can exist in multiple states simultaneously, enabling parallel processing of unprecedented complexity.",
         "The olive groves of Crete produce some of the world's finest extra virgin olive oil. Harvested by hand in late autumn, the olives are cold-pressed within hours to preserve their peppery, fruity notes. Local families have passed down these techniques for generations.",
         "Miles Davis revolutionized jazz multiple times throughout his career. His 1959 album 'Kind of Blue' introduced modal jazz to the mainstream, moving away from complex chord progressions toward simpler scales that gave improvisers more freedom to explore melodic ideas.",
         "Bioluminescence in deep-sea creatures serves multiple purposes beyond simple illumination. The anglerfish uses a glowing lure to attract prey in the pitch-black depths, while some squid species employ light patterns for communication and camouflage against the faint light filtering from above.",
         "Filippo Brunelleschi's dome atop Florence Cathedral represents a masterpiece of engineering innovation. Completed in 1436, the double-shelled structure was built without traditional wooden scaffolding, using a herringbone brick pattern that allowed the dome to support itself during construction.",
         "Arabica coffee plants thrive at high altitudes between 600 and 2000 meters, where cooler temperatures slow the cherry maturation process. This extended growing period allows beans to develop more complex sugars and aromatic compounds, resulting in a smoother, more nuanced flavor profile.",
         "Hieroglyphic writing combined logographic and alphabetic elements, with some symbols representing sounds while others depicted entire words or concepts. The Rosetta Stone, discovered in 1799, proved crucial to decipherment by presenting the same text in three different scripts.",
         "Shield volcanoes like those in Hawaii form through repeated eruptions of low-viscosity basaltic lava. These flows spread widely before cooling, gradually building broad, gently sloping mountains that can span hundreds of kilometers and reach enormous heights.",
         "Beethoven's transition from Classical to Romantic style is evident in his middle period works. The 'Eroica' Symphony, originally dedicated to Napoleon, broke conventions with its unprecedented length, emotional intensity, and complex developmental sections.",
         "Mycelium networks beneath forest floors facilitate nutrient exchange between trees through a symbiotic relationship called mycorrhizal association. These 'wood wide webs' allow mature trees to support younger saplings by sharing carbon and essential minerals through fungal connections.",
        "The Silk Road wasn't a single path but a vast network of interconnected trade routes spanning over 6,400 kilometers. Merchants rarely traveled the entire distance; instead, goods changed hands multiple times, passing through oasis towns where different cultures exchanged not just commodities but ideas, religions, and technologies.",
        "Tardigrades, often called water bears, can survive conditions that would kill virtually any other organism. These microscopic creatures enter a state called cryptobiosis, expelling nearly all water from their bodies and effectively suspending their metabolism to endure extreme temperatures, radiation, and even the vacuum of space.",
        "The golden ratio appears throughout nature with remarkable consistency. From the spiral arrangement of sunflower seeds to the proportions of nautilus shells, this mathematical constant of approximately 1.618 seems to govern patterns of growth and has fascinated mathematicians since the ancient Greeks first documented it.",
        "Japanese swordsmiths developed the katana through a process of differential hardening. By coating the blade's spine with clay before quenching, they created a weapon with a hard, sharp edge and a flexible back, combining cutting ability with resilience against breaking in combat.",
        "Coral reefs occupy less than one percent of the ocean floor yet support roughly a quarter of all marine species. These underwater ecosystems function as nurseries for countless fish species, with the intricate calcium carbonate structures built by tiny polyps providing shelter and hunting grounds for thousands of organisms.",
        "The printing press transformed European society not merely by making books affordable but by standardizing language itself. Before Gutenberg, regional dialects varied so widely that readers in different cities might struggle to understand the same text; mass printing gradually unified spelling and grammar across vast populations.",
        "Glaciers store approximately 69 percent of Earth's fresh water in solid form. As these massive ice formations move downhill under their own weight, they carve distinctive U-shaped valleys and deposit erratic boulders hundreds of kilometers from their origin points.",
        "Sourdough bread relies on a symbiotic culture of wild yeast and lactic acid bacteria. Unlike commercial yeast, this community of microorganisms produces organic acids during fermentation, creating the characteristic tangy flavor while also breaking down gluten and phytic acid, potentially improving digestibility.",
        "The Voyager 1 spacecraft, launched in 1977, continues transmitting data from interstellar space over 24 billion kilometers away. Its golden record, containing sounds and images of Earth, was designed as a message to any extraterrestrial intelligence that might encounter the probe in the distant future.",
        "Octopuses possess three hearts and blue copper-based blood that functions more efficiently in cold, low-oxygen environments. Their distributed nervous system allows each arm to operate semi-independently, processing sensory information and making decisions without direct input from the central brain.",
        "The Great Wall of China was built over two thousand years by multiple dynasties, not as a single continuous structure. Many sections were constructed independently, and portions made of rammed earth in dry western regions have eroded significantly compared to the stone sections closer to Beijing.",
        "Hummingbirds can rotate their wings in a full circle, enabling them to hover in place and even fly backward. Their hearts beat up to 1,200 times per minute during flight, and they must consume roughly half their body weight in sugar daily to fuel this extraordinary metabolism.",
        "Tectonic plates move at roughly the same rate that human fingernails grow. This seemingly glacial pace has nonetheless reshaped Earth's surface dramatically over geological time, splitting supercontinents and raising mountain ranges through accumulated pressure across millions of years.",
        "The human eye can distinguish approximately ten million different colors through three types of cone cells sensitive to red, green, and blue wavelengths. The brain combines signals from these receptors, interpreting subtle variations in intensity to construct our perception of the visible spectrum.",
        "Machu Picchu's stonework fits together without mortar, yet the joints are so precise that a blade cannot slip between blocks. Inca engineers achieved this through a technique of grinding and fitting each stone individually, creating structures that have withstood centuries of earthquakes.",
        "Honey never spoils if stored properly, with archaeologists finding edible honey in Egyptian tombs over 3,000 years old. Its low moisture content and acidic pH create an environment where bacteria cannot survive, making it one of nature's most effective preservatives.",
        "The aurora borealis occurs when charged particles from the sun collide with atmospheric gases at high altitudes. Different gases produce different colors: oxygen creates green and red lights, while nitrogen contributes purple and blue hues to the dancing curtains of light.",
        "Bamboo holds the record for the fastest-growing plant, with some species extending up to 91 centimeters in a single day. Despite this rapid growth, bamboo is remarkably strong for its weight, with a tensile strength comparable to steel, making it an increasingly popular sustainable building material.",
        "The Antikythera mechanism, recovered from a Roman-era shipwreck, represents ancient Greece's most sophisticated known technological achievement. This intricate bronze device used dozens of interlocking gears to predict astronomical positions and eclipses with remarkable accuracy nearly two millennia before similar mechanisms appeared in Europe.",
        "Sperm whales can dive to depths exceeding 2,000 meters, where pressure would crush most creatures. Their flexible ribcages collapse during descent, pushing air from the lungs into reinforced nasal passages, while specialized blood chemistry allows them to store enough oxygen for hunts lasting over an hour.",
        "Saffron remains the world's most expensive spice because each crocus flower produces only three stigmas, which must be handpicked during a brief autumn bloom. Producing a single kilogram requires approximately 150,000 flowers, making the labor-intensive harvest the primary driver of its exceptional price.",
        "Gothic cathedrals achieved unprecedented heights through flying buttresses, external arched supports that transferred the weight of the roof outward. This innovation allowed builders to replace heavy walls with vast stained glass windows, flooding interiors with colored light that transformed religious architecture.",
        "Venus rotates backward compared to most planets in our solar system, with the sun rising in the west and setting in the east. A Venusian day lasts longer than its year, taking 243 Earth days to complete one rotation while orbiting the sun in just 225 days.",
        "The electric eel generates shocks of up to 860 volts through specialized cells called electrocytes stacked like batteries in its body. These pulses serve both to stun prey and navigate murky waters, as the fish can sense distortions in the electric field it creates around itself.",
        "Parmigiano-Reggiano cheese requires between 12 and 36 months of aging in climate-controlled warehouses. Each wheel must pass rigorous quality inspections, including sound tests where inspectors tap the rind with small hammers to detect internal cracks or voids that would prevent certification.",
        "The Library of Alexandria, though often romanticized as a single catastrophic burning, likely declined gradually over centuries. Multiple fires, funding cuts, and political changes eroded its collections, with the institution's scholars dispersing to other centers of learning throughout the ancient Mediterranean.",
        "Pitcher plants have evolved leaves shaped like slippery funnels to trap insects. The rim secretes nectar that attracts prey while remaining too smooth for footing, sending victims tumbling into pools of digestive enzymes at the bottom where they slowly dissolve into absorbable nutrients.",
        "The Hoover Dam contains enough concrete to pave a two-lane highway from San Francisco to New York. Engineers had to install cooling pipes throughout the structure because the chemical reaction during concrete curing would have otherwise taken over a century to dissipate naturally.",
        "Cuttlefish can change both color and texture in milliseconds using specialized skin cells called chromatophores. This ability serves camouflage, communication, and hunting, with the animals able to produce mesmerizing patterns that appear to hypnotize prey before striking.",
        "The violin family emerged in northern Italy during the early 16th century, with Cremona becoming the center of production. Makers like Stradivari crafted instruments whose acoustic properties remain unmatched, though whether their superiority stems from wood treatment, varnish, or simply age continues to spark scientific debate.",
        "Permafrost in Siberia and Alaska contains an estimated 1,500 billion metric tons of organic carbon frozen in the soil. As temperatures rise, microbial decomposition of this material could release vast quantities of methane and carbon dioxide, creating a feedback loop that accelerates warming.",
        "The Panama Canal uses a system of locks that function as water elevators, raising ships 26 meters above sea level to cross the continental divide. Fresh water from Gatun Lake flows through the locks by gravity alone, with each transit consuming approximately 200 million liters.",
        "Mantis shrimp strike prey with specialized appendages that accelerate faster than a bullet, generating forces powerful enough to shatter aquarium glass. These punches create cavitation bubbles whose collapse produces additional shockwaves, effectively hitting targets twice with each strike.",
        "Damascus steel swords, prized in medieval times for their distinctive wavy patterns, were forged from wootz steel imported from India. The exact techniques for producing this material were lost by the 18th century, and modern metallurgists have only recently begun recreating its characteristic carbon nanostructures.",
        "The Dead Sea lies approximately 430 meters below sea level, making its shores the lowest point on Earth's land surface. Its extreme salinity, nearly ten times that of the ocean, allows bathers to float effortlessly but supports almost no aquatic life beyond specialized bacteria.",
        "Axolotls retain their larval features throughout adulthood, a phenomenon called neoteny, keeping their external gills and remaining fully aquatic. These Mexican salamanders can regenerate entire limbs, including bones, muscles, and nerves, making them invaluable subjects for studying tissue regeneration.",
        "The Nazca Lines in Peru remain visible after nearly two thousand years because the arid climate prevents erosion. These enormous geoglyphs, some spanning hundreds of meters, were created by removing reddish surface stones to expose the lighter ground beneath.",
        "Neutron stars pack roughly 1.4 solar masses into spheres just 20 kilometers across, creating densities where a teaspoon of material would weigh billions of tons. Their rapid rotation and intense magnetic fields produce lighthouse-like beams of radiation that sweep across space as pulsars.",
        "Traditional balsamic vinegar from Modena ages for a minimum of 12 years in progressively smaller barrels of different woods. Each wood imparts distinct flavors, and evaporation concentrates the liquid until the final product reaches a syrupy consistency that bears little resemblance to commercial versions.",
        "The Hagia Sophia's dome appears to float above the nave, an illusion created by a ring of windows at its base that flood the interior with light. This architectural marvel required innovative solutions to distribute the dome's weight, including half-domes and pendentives that transition from a square base to a circular crown.",
        "Leaf-cutter ants don't eat the foliage they harvest but use it to cultivate fungus gardens underground. This agricultural system, predating human farming by millions of years, involves specialized castes that tend crops, dispose of waste, and protect colonies housing millions of individuals.",
        "Geothermal energy in Iceland provides roughly 90 percent of the nation's home heating. The island's position on the Mid-Atlantic Ridge gives it abundant volcanic activity, allowing hot water to be piped directly from underground reservoirs to radiators throughout Reykjavik.",
        "The basilisk lizard can sprint across water surfaces by slapping its feet rapidly enough to create air pockets beneath each step. This ability, which earns it the nickname 'Jesus Christ lizard,' works only at high speeds; slowing down causes the animal to sink and swim normally.",
        "Champagne's effervescence comes from a secondary fermentation that occurs inside the bottle. Yeast consumes added sugar in the sealed container, producing carbon dioxide that dissolves under pressure and releases as fine bubbles when the wine is finally poured.",
        "The Terracotta Army was discovered in 1974 by farmers digging a well near Xi'an. These life-sized clay soldiers, originally painted in vivid colors that faded upon exposure to air, were designed to protect Emperor Qin Shi Huang in the afterlife and number over 8,000 figures.",
        "Black holes emit no light directly, but the accretion disks of superheated matter spiraling into them produce some of the brightest phenomena in the universe. Friction within these disks raises temperatures to millions of degrees, generating intense X-ray radiation detectable across cosmic distances.",
        "The Fibonacci sequence appears in plant growth patterns because each successive element provides the most efficient packing arrangement. Florets in a sunflower head spiral outward in Fibonacci numbers, maximizing seed density while ensuring each receives adequate sunlight and nutrients.",
        "Venice's foundations rest on millions of wooden pilings driven into the lagoon floor. Contrary to intuition, these submerged timbers have petrified over centuries rather than rotting, as the oxygen-poor mud prevents the bacterial activity necessary for decay.",
        "Snow leopards have evolved tails nearly as long as their bodies, using them for balance on steep mountain terrain and as insulation when wrapped around their faces during sleep. Their unusually large nasal passages warm frigid air before it reaches their lungs in the thin atmosphere above 3,000 meters.",
        "The metric system originated during the French Revolution as an attempt to create universal, rational measurements divorced from arbitrary royal standards. The original meter was defined as one ten-millionth of the distance from the equator to the North Pole, though modern definitions rely on the speed of light."]

def gen_audio(texts, lang, voices, output_path):
    for voice_n,voice in enumerate(voices):
        os.makedirs(f'{output_path}/voice_{voice_n}', exist_ok=True)
        
        pipeline = KPipeline(lang_code=lang)
        for idx in range(len(texts)):
            text = texts[idx]
            generator = pipeline(
            text, voice=voice,
            speed=1, split_pattern=r'\n+'
        )
        
            for i, (gs, ps, audio) in enumerate(generator):
                #print(i)  # i => index
                #print(gs) # gs => graphemes/text
                #print(ps) # ps => phonemes
                #display(Audio(data=audio, rate=24000, autoplay=i==0))
                f = f'{output_path}/voice_{voice_n}/text_{idx}_{i}.wav'
                sf.write(f, audio, 24000) 
voices = ['af_heart', 'af_bella', 'am_fenrir', 'am_michael', 'af_nicole']
gen_audio(texts, 'a', voices, "outputs/english")